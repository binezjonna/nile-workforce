<script>
    // =========== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ===========
    const STORAGE_KEY = 'nileWorkForce_applications';
    const ADMIN_PASSWORD = 'admin123';
    const PHONE_NUMBER = '01028052445';
    const WHATSAPP_NUMBER = '201028052445';

    // =========== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ===========
    document.addEventListener('DOMContentLoaded', function () {
        console.log('ğŸš€ Ù†Ø¸Ø§Ù… Nile Work Force ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­');
        setupFileUpload();
        setupFormSubmission();
        setupAdminDashboard();
        setupSmoothScroll();
        updateStats();
    });

    // =========== Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ===========
    function setupFileUpload() {
        const fileInput = document.getElementById('cv');
        const uploadArea = document.getElementById('fileUploadArea');
        const uploadText = document.getElementById('fileUploadText');
        const fileNameDisplay = document.getElementById('fileName');

        uploadArea.addEventListener('click', () => fileInput.click());

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¬Ù… (5MB ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰)
            if (file.size > 5 * 1024 * 1024) {
                alert('Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ± Ø¬Ø¯Ù‹Ø§. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ Ù‡Ùˆ 5MB.');
                resetFileInput(fileInput, uploadText, fileNameDisplay);
                return;
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
            const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
            if (!allowedTypes.includes(file.type)) {
                alert('Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…. ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ù…Ù„Ù PDF Ø£Ùˆ Word ÙÙ‚Ø·.');
                resetFileInput(fileInput, uploadText, fileNameDisplay);
                return;
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            uploadText.textContent = 'ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù';
            fileNameDisplay.innerHTML = `<i class="fas fa-check-circle"></i> ${file.name} (${formatFileSize(file.size)})`;
            uploadArea.style.borderColor = '#28a745';
            uploadArea.style.background = '#f0fff4';
        });
    }

    function resetFileInput(fileInput, uploadText, fileNameDisplay) {
        fileInput.value = '';
        uploadText.textContent = 'Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©';
        fileNameDisplay.textContent = '';
    }

    // =========== Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ===========
    function setupFormSubmission() {
        const form = document.getElementById('jobApplicationForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const cvFile = document.getElementById('cv').files[0];
            const fullName = document.getElementById('fullName').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            const governorate = document.getElementById('governorate').value;
            const sector = document.getElementById('sector').value;
            const experience = document.getElementById('experience').value;
            const message = document.getElementById('message').value.trim();

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            if (!fullName || !phone || !email || !cvFile) {
                showMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.', 'error');
                return;
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showMessage('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­.', 'error');
                return;
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
            const phoneRegex = /^01[0-2,5]{1}[0-9]{8}$/;
            if (!phoneRegex.test(phone)) {
                showMessage('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ù…ØµØ±ÙŠ ØµØ­ÙŠØ­ (Ù…Ø«Ø§Ù„: 01028052445).', 'error');
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø§Ù„Ø·Ù„Ø¨
            const application = {
                id: 'NWF-' + Date.now().toString().slice(-8),
                name: fullName,
                phone: phone,
                email: email,
                governorate: governorate,
                sector: sector,
                experience: experience,
                cvFile: {
                    name: cvFile.name,
                    size: cvFile.size,
                    type: cvFile.type,
                },
                message: message || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯',
                date: new Date().toLocaleString('ar-EG', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                }),
                timestamp: Date.now(),
                status: 'Ø¬Ø¯ÙŠØ¯'
            };

            // Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨
            saveApplication(application);

            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
            showMessage(`
                <div style="text-align: center;">
                    <i class="fas fa-check-circle" style="font-size: 3.5rem; color: #28a745; margin-bottom: 20px;"></i>
                    <h3 style="color: #155724; margin-bottom: 15px;">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</h3>
                    <p style="margin-bottom: 10px;">Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹: <strong style="color: var(--primary);">${application.id}</strong></p>
                    <p>Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ <strong style="color: var(--secondary);">${application.name}</strong> Ø¹Ù„Ù‰ ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨Ùƒ.</p>
                    <p>Ø³Ø£ØªØµÙ„ Ø¨Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… <strong style="color: var(--secondary);">${application.phone}</strong> Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø©.</p>
                </div>
            `, 'success');

            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            setTimeout(() => {
                form.reset();
                resetFileInput(document.getElementById('cv'), document.getElementById('fileUploadText'), document.getElementById('fileName'));
            }, 5000);
        });
    }

    // =========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ===========
    function getApplications() {
        try {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : [];
        } catch (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
            return [];
        }
    }

    function saveApplication(application) {
        const applications = getApplications();
        applications.unshift(application);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(applications));
        updateStats();
        console.log('âœ… ØªÙ… Ø­ÙØ¸ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:', application.name);
    }

    // =========== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ===========
    function setupAdminDashboard() {
        const adminToggle = document.getElementById('adminToggle');
        adminToggle.addEventListener('click', () => {
            const password = prompt('ğŸ”’ Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:');
            if (password === ADMIN_PASSWORD) {
                loadDashboard();
                document.getElementById('dashboard').style.display = 'block';
            } else if (password !== null) {
                alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
            }
        });
    }

    function loadDashboard() {
        const applications = getApplications();
        updateDashboardStats(applications);
        updateApplicationsTable(applications);
        document.getElementById('lastUpdate').textContent = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${new Date().toLocaleString('ar-EG')}`;
    }

    function updateDashboardStats(applications) {
        const today = new Date().toDateString();
        const todayApps = applications.filter(app => new Date(app.timestamp).toDateString() === today).length;
        const hotelApps = applications.filter(app => app.sector && app.sector.includes('ÙÙ†Ø¯Ù‚')).length;
        const factoryApps = applications.filter(app => app.sector && app.sector.includes('Ù…ØµÙ†Ø¹')).length;
        const companyApps = applications.filter(app => app.sector && app.sector.includes('Ø´Ø±ÙƒØ§Øª')).length;

        document.getElementById('applicationsCount').textContent = `${applications.length} Ø·Ù„Ø¨Ø§Øª ØªÙˆØ¸ÙŠÙ`;
        document.getElementById('dashboardStats').innerHTML = `
            <div class="dashboard-stat">
                <h3>${applications.length}</h3>
                <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
            </div>
            <div class="dashboard-stat">
                <h3>${todayApps}</h3>
                <p>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…</p>
            </div>
            <div class="dashboard-stat">
                <h3>${hotelApps}</h3>
                <p>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙÙ†Ø§Ø¯Ù‚</p>
            </div>
            <div class="dashboard-stat">
                <h3>${factoryApps}</h3>
                <p>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØµØ§Ù†Ø¹</p>
            </div>
            <div class="dashboard-stat">
                <h3>${companyApps}</h3>
                <p>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ§Øª</p>
            </div>
        `;
    }

    function updateApplicationsTable(applications) {
        const tbody = document.getElementById('applicationsBody');
        if (applications.length === 0) {
            tbody.innerHTML = `
                <tr>
                    <td colspan="8" style="text-align: center; padding: 50px; color: var(--gray);">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 20px; display: block; opacity: 0.5;"></i>
                        <h3 style="color: var(--gray); margin-bottom: 15px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØªÙˆØ¸ÙŠÙ Ø¨Ø¹Ø¯</h3>
                        <p style="color: var(--gray);">Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¬Ù…ÙŠØ¹ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ¸ÙŠÙ Ø§Ù„ØªÙŠ ÙŠØªÙ… ØªÙ‚Ø¯ÙŠÙ…Ù‡Ø§</p>
                    </td>
                </tr>
            `;
            return;
        }

        tbody.innerHTML = applications.map((app, index) => `
            <tr>
                <td>${index + 1}</td>
                <td>${app.name}</td>
                <td>${app.phone}</td>
                <td>${app.governorate || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                <td>${app.sector || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                <td>${app.experience || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                <td>${app.date || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                <td>
                    <button onclick="viewApplication('${app.id}')"><i class="fas fa-eye"></i> Ø¹Ø±Ø¶</button>
                    <button onclick="contactApplicant('${app.phone}', '${app.name}')"><i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨</button>
                    <button onclick="deleteApplication('${app.id}')"><i class="fas fa-trash"></i> Ø­Ø°Ù</button>
                </td>
            </tr>
        `).join('');
    }

    function viewApplication(id) {
        const applications = getApplications();
        const app = applications.find(a => a.id === id);
        if (!app) {
            alert('Ø§Ù„Ø·Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
            return;
        }

        const details = `
            <div style="background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow); max-width: 600px;">
                <h3 style="color: var(--primary); margin-bottom: 25px;">ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØ¸ÙŠÙ</h3>
                <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${app.name}</p>
                <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${app.phone}</p>
                <p><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> ${app.email}</p>
                <p><strong>Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©:</strong> ${app.governorate}</p>
                <p><strong>Ø§Ù„Ù‚Ø·Ø§Ø¹:</strong> ${app.sector}</p>
                <p><strong>Ø§Ù„Ø®Ø¨Ø±Ø©:</strong> ${app.experience}</p>
                <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${app.date}</p>
                <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span style="color: #28a745;">${app.status}</span></p>
                <p><strong>Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©:</strong> <a href="${URL.createObjectURL(new Blob([app.cvFile]))}" download="${app.cvFile.name}">ØªÙ†Ø²ÙŠÙ„</a></p>
                ${app.message !== 'Ù„Ø§ ÙŠÙˆØ¬Ø¯' ? `<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${app.message}</p>` : ''}
            </div>
        `;
        alertWithHTML(details);
    }

    function contactApplicant(phone, name) {
        const message = `Ù…Ø±Ø­Ø¨Ù‹Ø§ ${name}ØŒ Ø£Ù†Ø§ Ø­Ø³ÙŠÙ† Ø¹Ø¯Ù„ÙŠ Ù…Ø¯ÙŠØ± Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø´Ø±ÙŠØ©. Ø´ÙƒØ±Ù‹Ø§ Ù„ØªÙ‚Ø¯ÙŠÙ…Ùƒ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Nile Work Force. Ù†ÙˆØ¯ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¨Ø®ØµÙˆØµ Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØ¸ÙŠÙ.`;
        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`, '_blank');
    }

    function deleteApplication(id) {
        if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ')) return;
        let applications = getApplications();
        applications = applications.filter(app => app.id !== id);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(applications));
        loadDashboard();
        alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
    }

    function exportData() {
        const applications = getApplications();
        if (applications.length === 0) {
            alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±');
            return;
        }

        let csv = 'Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹,Ø§Ù„Ø§Ø³Ù…,Ø§Ù„Ù‡Ø§ØªÙ,Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ,Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©,Ø§Ù„Ù‚Ø·Ø§Ø¹,Ø§Ù„Ø®Ø¨Ø±Ø©,Ø§Ù„ØªØ§Ø±ÙŠØ®,Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª\n';
        applications.forEach(app => {
            const row = [
                `"${app.id}"`,
                `"${app.name}"`,
                `"${app.phone}"`,
                `"${app.email}"`,
                `"${app.governorate}"`,
                `"${app.sector}"`,
                `"${app.experience}"`,
                `"${app.date}"`,
                `"${app.message}"`
            ].join(',');
            csv += row + '\n';
        });

        const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);
        link.setAttribute('href', url);
        link.setAttribute('download', `Ø·Ù„Ø¨Ø§Øª_Ø§Ù„ØªÙˆØ¸ÙŠÙ_${new Date().toISOString().slice(0, 10)}.csv`);
        link.style.visibility = 'hidden';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        alert(`ØªÙ… ØªØµØ¯ÙŠØ± ${applications.length} Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­`);
    }

    // =========== ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© ===========
    function showMessage(content, type) {
        const messageDiv = document.getElementById('formMessage');
        messageDiv.className = `message ${type}`;
        messageDiv.innerHTML = content;
        messageDiv.style.display = 'block';
        messageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function alertWithHTML(html) {
        const modal = document.createElement('div');
        modal.style.cssText = `
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 2000;
            display: flex; align-items: center; justify-content: center;
            padding: 20px;
        `;
        const content = document.createElement('div');
        content.style.cssText = `
            background: white; max-width: 600px; width: 100%;
            max-height: 80vh; overflow-y: auto;
            border-radius: var(--border-radius); padding: 30px;
            position: relative;
        `;
        const closeBtn = document.createElement('button');
        closeBtn.innerHTML = '&times;';
        closeBtn.style.cssText = `
            position: absolute; top: 15px; left: 15px;
            background: none; border: none; font-size: 2rem;
            color: var(--gray); cursor: pointer;
        `;
        closeBtn.onclick = () => document.body.removeChild(modal);
        content.innerHTML = html;
        content.prepend(closeBtn);
        modal.appendChild(content);
        document.body.appendChild(modal);
    }

    function formatFileSize(bytes) {
        if (bytes < 1024) return bytes + ' Ø¨Ø§ÙŠØª';
        else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª';
        else return (bytes / 1048576).toFixed(1) + ' Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª';
    }

    function updateStats() {
        const applications = getApplications();
        const uniqueGovernorates = new Set(applications.map(app => app.governorate));
        document.getElementById('statHotels').textContent = `${Math.max(50, applications.filter(app => app.sector && app.sector.includes('ÙÙ†Ø¯Ù‚')).length * 5)}+`;
        document.getElementById('statFactories').textContent = `${Math.max(30, applications.filter(app => app.sector && app.sector.includes('Ù…ØµÙ†Ø¹')).length * 3)}+`;
        document.getElementById('statApplicants').textContent = `${applications.length}+`;
        document.getElementById('statGovernorates').textContent = Math.max(15, uniqueGovernorates.size);
    }

    function setupSmoothScroll() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    const headerHeight = document.querySelector('header').offsetHeight;
                    window.scrollTo({
                        top: targetElement.offsetTop - headerHeight - 20,
                        behavior: 'smooth'
                    });
                }
            });
        });
    }
</script>
